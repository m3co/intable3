<!doctype html>
<html>
  <head>
    <script src="toJSON.js"></script>
    <script src="/bower_components/pseudoimport-html/fragment-ce.js"></script>

    <link rel="stylesheet" href="/bower_components/choices.js/assets/styles/css/choices.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="/bower_components/choices.js/assets/scripts/dist/choices.min.js"></script>

  </head>
  <x-fragment src="intable3.html"></x-fragment>
  <body>
    <x-inline-table esto-es-zero
      url-describe="/api/datas/describe"
      url-create="/api/data"
      url-index="/api/datas"
      url-show="/api/data/:id"
      url-update="/api/data/:id"
      url-delete="/api/data/:id">

      <template id="thead">
        <thead>
          <tr>
            <td actions>Acciones</td>
          </tr>
        </thead>
      </template>

      <template col="email">
        <td>
          <span></span>
          <form hidden>
            <input hidden>
            <select id="search-email" placeholder="Select an Email"></select>
            <input type="submit" hidden>
          </form>
          <script src="template-col-email.js"></script>
        </td>
      </template>

      <template id="row">
        <tr entry-id=":id">
          <td actions>
            <button id="delete">Deleto</button>
          </td>
        </tr>
        <tr entry-id=":id">
          <td colspan="5"
            entry-id=":id">

            <template entry-email=":email">
              <x-inline-table esto-es-primero
                url-describe="/api/datas/describe"
                url-create="/api/data"
                url-index="/api/datas/sliced2"
                url-show="/api/data/:id"
                url-update="/api/data/:id"
                url-delete="/api/data/:id">

                <template id="row">
                  <tr entry-id=":id">
                    <td actions>
                      <button id="delete">Deletare</button>
                    </td>
                  </tr>
                  <tr entry-id=":id">
                    <td colspan="5">
                      <template entry-email2=":email">
                        <x-inline-table esto-es-segundo
                          url-describe="/api/datas/describe"
                          url-create="/api/data"
                          url-index="/api/datas/sliced"
                          url-show="/api/data/:id"
                          url-update="/api/data/:id"
                          url-delete="/api/data/:id">
                          <template id="table">
                            <button id="add">Agregar</button>
                            <table>
                              <tbody>
                              </tbody>
                            </table>
                          </template>
                        </x-inline-table>
                      </template>
                      <script src="row-second.js"></script>
                    </td>
                  </tr>
                </template>

              </x-inline-table>
            </template>

            <script src="template-row.js"></script>
          </td>
        </tr>
      </template>
    </x-inline-table>
  </body>
  <script>
    'use strict';
    (() => {
      var table = document.querySelector('x-inline-table[esto-es-zero=""]');
      table.addEventListener('create-row', e => {
        console.log(e.detail, 'created row');
      });
      table.addEventListener('update-row', e => {
        console.log(e.detail, 'update row');
      });
      table.addEventListener('delete-row', e => {
        console.log(e.detail, 'delete row');
      });
    })();
  </script>
</html>
